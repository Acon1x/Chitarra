<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>For Chitarra ğŸ’–</title>

<style>
*{box-sizing:border-box;font-family:Arial,sans-serif}
body{
margin:0;
background:linear-gradient(135deg,#ff758c,#ff7eb3);
min-height:100vh;
display:flex;
justify-content:center;
align-items:center;
overflow:hidden;
}
.card{
background:white;
width:92%;
max-width:420px;
border-radius:20px;
padding:24px;
text-align:center;
box-shadow:0 20px 40px rgba(0,0,0,.2);
position:absolute;
transition:all .6s ease;
}
.hidden{display:none}
h1{color:#ff4d6d}
p{color:#555;line-height:1.6;min-height:40px}
button{
margin:10px 5px 0;
padding:10px 18px;
border:none;
border-radius:999px;
background:#ff4d6d;
color:white;
font-size:14px;
cursor:pointer;
transition:.3s;
}
button:hover{background:#e63950;transform:scale(1.08)}

/* ULTRA CINEMATIC SLIDER */
.slider{
position:relative;
margin-top:15px;
overflow:hidden;
border-radius:16px;
}
.slider img{
width:100%;
border-radius:16px;
opacity:1;
transition:opacity .6s ease, transform 8s ease;
}
.slider img.zoom{
transform:scale(1.08);
}
.arrow{
position:absolute;
top:50%;
transform:translateY(-50%);
background:rgba(0,0,0,.4);
color:white;
border-radius:50%;
width:38px;
height:38px;
display:flex;
align-items:center;
justify-content:center;
cursor:pointer;
font-size:18px;
backdrop-filter:blur(4px);
}
.arrow.left{left:10px}
.arrow.right{right:10px}

.dots{
margin-top:8px;
}
.dots span{
height:8px;
width:8px;
margin:0 3px;
background:#ccc;
border-radius:50%;
display:inline-block;
transition:.3s;
}
.dots .active{background:#ff4d6d;transform:scale(1.3)}

.single-photo{
width:100%;
border-radius:16px;
pointer-events:none;
}

#muteBtn{
position:fixed;
top:15px;
right:15px;
background:white;
padding:8px 12px;
border-radius:999px;
box-shadow:0 5px 15px rgba(0,0,0,.2);
cursor:pointer;
z-index:1000;
}
</style>
</head>
<body>

<div id="muteBtn" onclick="toggleMute()">ğŸ”Š</div>

<audio id="bgm" loop playsinline>
<source src="music.mp3" type="audio/mpeg">
</audio>

<audio id="popSound" playsinline>
<source src="pop.mp3" type="audio/mpeg">
</audio>

<div class="card" id="step1">
<h1>Hai Sayangkuu Chitarra Qatrunnada ğŸ˜³</h1>
<p id="typingText"></p>
<button onclick="startExperience()">Buka ğŸ’Œ</button>
</div>

<div class="card hidden" id="step2">
<h1>Untuk Chitarra ğŸ’–</h1>
<p>Happy Valentine Dayyy ğŸ’•<br>I love you sooo muchhh Cintaakuu ğŸ˜˜</p>

<div class="slider">
<div class="arrow left" onclick="prevSlide()">â®</div>
<img id="slideImage" src="photo1.jpeg">
<div class="arrow right" onclick="nextSlide()">â¯</div>
</div>
<div class="dots" id="dots"></div>

<button onclick="backTo1()">â¬… Back</button>
<button onclick="goStep3()">Lanjut ğŸ‘‰</button>
</div>

<div class="card hidden" id="step3">
<h1>Now Real Talk FRğŸ˜³</h1>
<p>Will you be my Valentine & my Partner forever?</p>
<button onclick="backTo2()">â¬… Back</button>
<button onclick="yesAnswer()">Yesirrr ğŸ’–</button>
<button id="noBtn" onclick="moveNoBtn()">No ğŸ˜œ</button>
</div>

<div class="card hidden" id="stepYes">
<h1>YEAYYYY ğŸ‰</h1>
<p>Terima Kasih Sayanggkuu â¤ï¸</p>

<div class="slider">
<div class="arrow left" onclick="prevFinal()">â®</div>
<img id="finalImage" src="photo2.jpeg" class="single-photo">
<div class="arrow right" onclick="nextFinal()">â¯</div>
</div>
<div class="dots" id="dotsFinal"></div>

</div>

<script>
var bgm=document.getElementById("bgm");
function startExperience(){bgm.play().catch(()=>{});switchCard("step1","step2")}
function toggleMute(){bgm.muted=!bgm.muted;document.getElementById("muteBtn").innerHTML=bgm.muted?"ğŸ”‡":"ğŸ”Š"}
function switchCard(f,t){document.getElementById(f).classList.add("hidden");document.getElementById(t).classList.remove("hidden")}
function goStep3(){switchCard("step2","step3")}
function backTo1(){switchCard("step2","step1")}
function backTo2(){switchCard("step3","step2")}
function yesAnswer(){
  switchCard("step3","stepYes");
  launchConfetti();

  /* PLAY POP SOUND FIX */
  var pop=document.getElementById("popSound");
  if(pop){
    pop.currentTime=0;
    pop.play().catch(()=>{});
  }
}
function moveNoBtn(){var b=document.getElementById("noBtn");b.style.position="absolute";b.style.left=Math.random()*80+"%";b.style.top=Math.random()*80+"%"}

/* SLIDER STEP2 */
var slides=["photo1.jpeg","photo3.jpeg"];
var current=0;
var img=document.getElementById("slideImage");
var dotsContainer=document.getElementById("dots");
slides.forEach((_,i)=>{var d=document.createElement("span");if(i==0)d.classList.add("active");dotsContainer.appendChild(d)});
function updateSlide(){img.style.opacity=0;setTimeout(()=>{img.src=slides[current];img.classList.add("zoom");img.style.opacity=1;updateDots();},300)}
function updateDots(){dotsContainer.childNodes.forEach((d,i)=>{d.classList.toggle("active",i==current)})}
function nextSlide(){current=(current+1)%slides.length;updateSlide()}
function prevSlide(){current=(current-1+slides.length)%slides.length;updateSlide()}

/* AUTO SLIDE */
setInterval(()=>{if(!document.getElementById("step2").classList.contains("hidden")){nextSlide()}},4000);

/* FINAL SLIDER */
var finalSlides=["photo2.jpeg"];
var currentF=0;
var imgF=document.getElementById("finalImage");
var dotsF=document.getElementById("dotsFinal");
finalSlides.forEach((_,i)=>{var d=document.createElement("span");if(i==0)d.classList.add("active");dotsF.appendChild(d)});
function updateFinal(){imgF.style.opacity=0;setTimeout(()=>{imgF.src=finalSlides[currentF];imgF.style.opacity=1;updateDotsF()},300)}
function updateDotsF(){dotsF.childNodes.forEach((d,i)=>{d.classList.toggle("active",i==currentF)})}
function nextFinal(){currentF=(currentF+1)%finalSlides.length;updateFinal()}
function prevFinal(){currentF=(currentF-1+finalSlides.length)%finalSlides.length;updateFinal()}

/* Typing */
var text="Aku Semalem Iseng buat inii, cuz biar romantis ceritanyaa HEHEHEH...ğŸ’•";
var i=0;
function typeWriter(){if(i<text.length){document.getElementById("typingText").innerHTML+=text.charAt(i);i++;setTimeout(typeWriter,40)}}
typeWriter();



/* ===== FLOATING HEART BACKGROUND ===== */
function createFloatingHeart(){
  const heart=document.createElement("div");
  heart.innerHTML="ğŸ’–";
  heart.style.position="fixed";
  heart.style.left=Math.random()*100+"vw";
  heart.style.bottom="-20px";
  heart.style.fontSize=(14+Math.random()*26)+"px";
  heart.style.opacity=Math.random();
  heart.style.animation=`floatUp ${4+Math.random()*4}s linear forwards`;
  document.body.appendChild(heart);
  setTimeout(()=>heart.remove(),8000);
}

setInterval(createFloatingHeart,700);

const style=document.createElement("style");
style.innerHTML=`
@keyframes floatUp{
  to{transform:translateY(-110vh);opacity:0}
}`;
document.head.appendChild(style);

/* ===== CONFETTI EXPLOSION ===== */
function launchConfetti(){
  for(let i=0;i<120;i++){
    const c=document.createElement("div");
    const isHeart=Math.random()>0.5;

    c.style.position="fixed";
    c.style.left="50%";
    c.style.top="50%";
    c.style.width="10px";
    c.style.height="10px";
    c.style.pointerEvents="none";

    if(isHeart){
      c.innerHTML="ğŸ’˜";
      c.style.fontSize="16px";
    }else{
      c.style.background=`hsl(${Math.random()*360},80%,60%)`;
    }

    const angle=Math.random()*2*Math.PI;
    const radius=300+Math.random()*300;
    const x=Math.cos(angle)*radius;
    const y=Math.sin(angle)*radius;

    c.style.transition="transform 1.5s ease-out, opacity 1.5s";
    document.body.appendChild(c);

    setTimeout(()=>{
      c.style.transform=`translate(${x}px,${y}px)`;
      c.style.opacity=0;
    },10);

    setTimeout(()=>c.remove(),1600);
  }
}


</script>

</body>
</html>
